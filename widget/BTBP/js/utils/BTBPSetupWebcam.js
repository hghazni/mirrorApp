(function(){var g=btbpExample,e=g.imageData,f=g.trace,a=e.webcam;a.setupStream=function(c,d,b,e,h){f("webcam.setupStream: isPlaying: "+a.isPlaying);a.video=c;a.constraints={video:{width:d,height:b,frameRate:e}};a.onCameraReady=h;a.startStream()};a.startStream=function(){a.stopStream();f("webcam.startStream: try: "+a.constraints.video.width+"x"+a.constraints.video.height);window.navigator.mediaDevices.getUserMedia(a.constraints).then(a.onStreamFetched)["catch"](a.onStreamError)};a.stopStream=function(){a.isPlaying&&
f("webcam.stopStream: isPlaying: "+a.isPlaying);a.isPlaying=!1;null!==a.stream&&(a.stream.getTracks().forEach(function(a){a.stop()}),a.stream=null);null!==a.video&&null!==a.video.srcObject&&(a.video.srcObject=null)};a.onStreamFetched=function(c){a.stream=c;null!==a.video&&(a.video.srcObject=c,a.video.play(),a.onStreamDimensionsAvailable())};a.onStreamDimensionsAvailable=function(){if(0===a.video.videoWidth)f("webcam.onStreamDimensionsAvailable: waiting"),clearTimeout(a.onStreamDimensionsAvailable_timeout),
a.onStreamDimensionsAvailable_timeout=setTimeout(a.onStreamDimensionsAvailable,100);else if(f("webcam.onStreamDimensionsAvailable: "+a.video.videoWidth+"x"+a.video.videoHeight),a.isPlaying=!0,a.onCameraReady)a.onCameraReady(!0)};a.onStreamError=function(c){f("webcam.onStreamError: "+c);a.isPlaying=!1;if(a.onCameraReady){var d=cameraErrorCode.UNKNOWN_ERROR;try{var b=c.name;"SourceUnavailableError"==b?d=cameraErrorCode.CAMERA_BUSY:"PermissionDeniedError"==b?d=cameraErrorCode.PERMISSION_DINED:"NotReadableError"==
b?d=cameraErrorCode.CAMERA_BUSY:"NotAllowedError"==b?d=cameraErrorCode.PERMISSION_DINED:"NotSupportedError"==b?d=cameraErrorCode.SECURE_CONNECTION_ERROR:"DevicesNotFoundError"==b?d=cameraErrorCode.CAMERA_NOT_FOUND:"NotFoundError"==b&&(d=cameraErrorCode.CAMERA_NOT_FOUND)}catch(e){console.log(e)}btbpExample.callbacks.onCameraError(d)}};a.setup=function(c,d,b,g){function h(a){a&&g(c.videoWidth,c.videoHeight)}c&&d?b?(e.type=function(){return"webcam"},e.init=function(){a.setupStream(c,b.width,b.height,
30,h)},e.dispose=function(){a.stopStream()},e.isAvailable=function(){return a.isPlaying},e.isStream=function(){return!0},e.update=function(){var a=d.getContext("2d");a.setTransform(-1,0,0,1,b.width,0);a.drawImage(c,0,0,b.width,b.height)}):f("setupWebcam: Please setup a resolution Rectangle.",!0):f("setupWebcam: Please add a <video> tag with id='_webcam' and a <canvas> tag with id='_imageData' to the DOM.",!0)}})();
