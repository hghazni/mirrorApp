(function exampleCode(){function w(){t=0;var f=q.width,n=q.height,l=n;n>f&&(l=f);var g=.4*l,e=.5*l,f=new btbpv4.Rectangle(.5*(f-g),.5*(n-e),g,e);btbpExample.drawing.drawRect(f,!1,.005*l,16711680,1);btbpExample.config.isAutoRest&&new Date-u>btbpExample.config.resetTimeout&&(u=new Date,btbpExample.callbacks.resetApp())}var v=new btbpv4.BTBPExtendedFace,e=btbpExample.settings,s=btbpExample.features,q=btbpExample.dom.getElement("_imageData"),t=0;btbpExample.initCurrentExample=function(f,e){f.init(e,e,
btbpExample.appId)};var u=new Date;btbpExample.updateCurrentExample=function(f,n,l){if(btbpExample.config.isStarted)for(f.update(n),l.clear(),f=f.getFaces(),n=0;n<f.length;n++){var g=f[n];if(g.state===btbpv4.BTBPState.FACE_TRACKING_START||g.state===btbpv4.BTBPState.FACE_TRACKING){v.update(g);var g=v.vertices,x=v.triangles,a,c=g;a=[];for(var d=c[0],p=c[1],k=c[0],r=c[1],m=c.length,b=void 0,h=2;h<m;h++)b=c[h],0===h%2?(b<d&&(d=b),b>k&&(k=b)):(b<p&&(p=b),b>r&&(r=b));m=parseInt(.04*(k-d));0==m%2&&m++;3>
m&&(m=3);s.kernalFace=m;s.kernalComplexion=5;b=parseInt(2.5*m);0==b%2&&b++;s.kernalForehead=b;h=parseInt(1.8*m);0==h%2&&h++;s.kernalEyebrow=h;a[0]=parseInt(d-b);a[1]=parseInt(p-b);a[2]=parseInt(k+b-a[0]+1);a[3]=parseInt(r+b-a[1]+1);d=c[96];p=c[97];k=c[96];r=c[97];for(h=98;119>=h;h++)b=c[h],0===h%2?(b<d&&(d=b),b>k&&(k=b)):(b<p&&(p=b),b>r&&(r=b));c=parseInt(.12*(k-d)*e.LipIntensity);0==c%2&&c++;3>c&&(c=3);s.kernalLip=c;b=Math.max(m,c);a[4]=parseInt(d-b);a[5]=parseInt(p-b);a[6]=parseInt(k+b-a[4]+1);
a[7]=parseInt(r+b-a[5]+1);d={x:a[0],y:a[1],width:a[2],height:a[3]};d=a[2];p=a[3];k=Math.min(q.width,q.height);if(18>=d*p/(k*k)*100){w();break}u=new Date;e.FLDPoints&&l.drawVertices(g,2,!1,41215,.4);e.FLDTriangles&&l.drawTriangles(g,x,!1,1,41215,.4);e.Foundation?(d={x:a[0],y:a[1],width:a[2],height:a[3]},l.drawFoundation(q,d,g,!1,e.Complexion)):e.Complexion&&(d={x:a[0],y:a[1],width:a[2],height:a[3]},l.drawComplexion(q,d,g,!1));e.Lipstick&&l.drawLipStick(q,{x:a[4],y:a[5],width:a[6],height:a[7]},g,!1);
e.isAnalysisStated||(t++,30<t&&(startAnalysis(q),e.isAnalysisStated=!0,t=0))}else w()}};btbpExample.dom.updateCodeSnippet(exampleCode+"")})();
